<?php/****************************************************************************** * Screaming Liquid Tiger * * Minimalistic podcast feed generator script for audiobooks * * @author     Marcel Bischoff * @copyright  2015 Marcel Bischoff * @license    http://opensource.org/licenses/MIT The MIT Licence * @version    0.1.1 * @link       https://github.com/herrbischoff/screaming-liquid-tiger * @since      File available since Release 0.1.0 *****************************************************************************//****************************************************************************** * Configuration Start *****************************************************************************//** * Feed info * * Basic feed information, all of which are mandatory. * description: basically anything you want, may appear in feed reader * link: dummy or real URL * title: your feed title as it appears in the feed reader */$conf = array(    'description' => 'Personal Audiobook Feed',    'link' => 'http://www.example.com',    'title' => 'Audiobook Podcast');/** * File extensions * * Extensions to use for feed item creation. Add your own extensions to be * included, the corresponding MIME types are generated automatically. */$exts = array(    'm4a',    'm4b',    'mp4',    'mp3',    'oga',    'ogg');/****************************************************************************** * Configuration End *****************************************************************************//** * Output correct content type */header('Content-type: application/rss+xml; charset=utf-8');/** * Check PHP version */if (!defined('PHP_VERSION_ID') || PHP_VERSION_ID < 50400) :    die('You need PHP 5.4+. You have ' . PHP_VERSION . '.');endif;/** * Date format according to RFC 822 */$date_fmt = 'D, d M Y H:i:s e';/** * Check for HTTPS */$prot = ($_SERVER['HTTPS'] != "on") ? 'http://' : 'https://';/** * Set base URL */$base_url = str_replace("index.php", "", $prot . $_SERVER["HTTP_HOST"] . $_SERVER["PHP_SELF"]);/** * Open fileinfo */$finfo = finfo_open(FILEINFO_MIME_TYPE);?><?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">    <channel>        <title><?= $conf['title'] ?></title>        <link><?= $conf['link'] ?></link>        <description><?= $conf['description'] ?></description>        <pubDate><?= date($date_fmt) ?></pubDate>        <lastBuildDate><?= date($date_fmt) ?></lastBuildDate>        <atom:link href="<?= $base_url ?>" rel="self" type="application/rss+xml" /><?phpif ($handle = opendir('.')) :    while (false !== ($entry = readdir($handle))) :        if (in_array(pathinfo($entry, PATHINFO_EXTENSION), $exts)) :?>        <item>            <title><?php $p = pathinfo($entry); echo $p['filename'] ?></title>            <guid><?= $base_url . rawurlencode($entry) ?></guid>            <enclosure url="<?= $base_url . rawurlencode($entry) ?>" length="<?php echo filesize($entry) ?>" type="<?= finfo_file($finfo, $entry) ?>"/>            <pubDate><?= date($date_fmt, filemtime($entry)) ?></pubDate>        </item><?php        endif;    endwhile;endif;/** * Close fileinfo */finfo_close($finfo);closedir($handle);?>    </channel></rss>